<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="../">
    <title>WINHUB - CONTACT</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>
<body class="subpage-body">
   
    <div id="loader-placeholder"></div>
    <div id="header-placeholder"></div>
    <div id="menu-overlay-placeholder"></div>
    
    <div id="fullscreen-threejs-bg"></div>

    <div class="subpage-container">
        <section id="sub-hero" class="subpage-section sub-hero-section">
            <div class="sub-hero-content">
                <h1 class="page-title title-class">CONTACT</h1>
                <p class="page-description content-class">
                    소비자 경험에 대한 깊이 있는 사고와 날카로운 통찰력으로 고객에 맞는 트렌드를 선도합니다.
                </p>
            </div>
            <div id="threejs-object-container" class="sub-spline-container">
                <canvas id="spline-canvas-subpage" style="width:100%;height:100%;position:absolute;top:0;left:0;outline:none;"></canvas>
            </div>
            <p class="scroll-icon"><span class="scroll"></span></p>
        </section>

        <div id="escalator-rects-container"></div>
        <section id="contact-section" class="subpage-section content-section">
            <div class="section-content-wrapper contact-wrapper">
                <div class="contact-intro">
                    <h2 class="content-class section-title contact-section-title">Let's work together</h2>
                </div>
                <div class="contact-main-content">
                    <div class="contact-info-container">
                        <div class="contact-info-item">
                            <span class="info-label content-class">TEL</span>
                            <span class="info-value content-class">031-998-1815</span>
                        </div>
                        <div class="contact-info-item">
                            <span class="info-label content-class">FAX</span>
                            <span class="info-value content-class">031-998-1815</span>
                        </div>
                        <div class="contact-info-item">
                            <span class="info-label content-class">E-MAIL</span>
                            <span class="info-value content-class">
                                <a href="mailto:winhub@winhub.co.kr" class="content-class mail-link">winhub@winhub.co.kr</a>
                            </span>
                        </div>
                        <div class="contact-info-item">
                            <span class="info-label content-class">ADDRESS</span>
                            <span class="info-value content-class">경기도 고양시 덕양구 동산동 379번지 309호</span>
                        </div>
                    </div>
                    <div class="contact-form-container">
                        <form id="contactForm">
                            <!-- HTML 구조 변경: input/textarea를 label 앞으로 이동 -->
                            <div class="form-group">
                                <input type="text" id="name" name="name" class="form-input" placeholder=" " required>
                                <label for="name" class="form-label content-class">Name</label>
                            </div>
                            <div class="form-group">
                                <input type="email" id="email" name="email" class="form-input" placeholder=" " required>
                                <label for="email" class="form-label content-class">Email</label>
                            </div>
                            <div class="form-group">
                                <textarea id="message" name="message" rows="4" class="form-textarea" placeholder=" " required></textarea>
                                <label for="message" class="form-label content-class">Message</label>
                            </div>
                            <button type="submit" class="form-submit-btn">Send <span class="arrow-right">&rarr;</span></button>
                        </form>
                        <div id="form-status-message" class="form-status-message"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="map-section" class="subpage-section map-container">
            <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=23c46de86bb70cdce2502d7d213bd765&libraries=services"></script>
            <div id="kakao-map" style="width:100%;height:100%;"></div>
        </section>
        
        <button id="scrollToTopBtn" title="위로 가기"><i class="fas fa-arrow-up"></i></button>
        
    </div>
    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script type="module" src="assets/js/sub-app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Kakao Map 초기화
            const mapContainer = document.getElementById('kakao-map');
            if (mapContainer && typeof kakao !== 'undefined' && kakao.maps) {
                const mapOption = { 
                    center: new kakao.maps.LatLng(37.647935, 126.908358),
                    level: 3 
                };
                const map = new kakao.maps.Map(mapContainer, mapOption); 
                const markerPosition  = new kakao.maps.LatLng(37.647935, 126.908358); 
                const marker = new kakao.maps.Marker({
                    position: markerPosition
                });
                marker.setMap(map);
                const iwContent = '<div style="padding:5px; font-size:0.9rem;">WINHUB<br><a href="https://map.kakao.com/link/map/WINHUB,37.647935,126.908358" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/WINHUB,37.647935,126.908358" style="color:blue" target="_blank">길찾기</a></div>',
                      iwPosition = new kakao.maps.LatLng(37.647935, 126.908358);
                const infowindow = new kakao.maps.InfoWindow({
                    position : iwPosition, 
                    content : iwContent 
                });
                infowindow.open(map, marker); 

                function resizeMap() {
                    if (map) {
                        map.relayout();
                        map.setCenter(markerPosition);
                    }
                }
                window.addEventListener('resize', resizeMap);

                const mapSection = document.getElementById('map-section');
                if (mapSection) {
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                resizeMap();
                            }
                        });
                    }, { threshold: 0.1 });
                    observer.observe(mapSection);
                }
            } else {
                if (mapContainer) {
                    mapContainer.innerHTML = "<p style='text-align:center; padding:20px; color: var(--subpage-text-color, #ffffff);'>지도를 불러오는데 실패했습니다. Kakao Maps API 키를 확인해주세요.</p>";
                }
                console.error("Kakao Maps API가 로드되지 않았습니다.");
            }

            // 문의하기 폼 제출 처리
            const contactForm = document.getElementById('contactForm');
            const formStatusMessage = document.getElementById('form-status-message');

            if (contactForm) {
                contactForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    if (formStatusMessage) {
                        formStatusMessage.textContent = '문의가 성공적으로 전송되었습니다.';
                        formStatusMessage.className = 'form-status-message success';
                        formStatusMessage.style.display = 'block';
                    }
                    contactForm.reset();

                    // 레이블 위치를 원래대로 되돌리기 위해 잠시 클래스를 제거
                    document.querySelectorAll('.form-input, .form-textarea').forEach(input => {
                        // Check if the input is valid after reset
                        if (!input.checkValidity()) {
                           // No action needed, the CSS handles the empty state
                        }
                    });

                    setTimeout(() => {
                        if (formStatusMessage) formStatusMessage.style.display = 'none';
                    }, 5000);
                });
            }
        });
    </script>
</body>
</html>
